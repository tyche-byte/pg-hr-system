<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>퍼피갤러리 HR - 보안 관리 시스템</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }

        /* --- 인쇄 최적화 (A4) --- */
        @media print {
            @page { size: A4; margin: 0; }
            .no-print { display: none !important; }
            body { background-color: white !important; margin: 0; padding: 0; }
            #main-scroll { overflow: visible !important; height: auto !important; padding: 0 !important; margin: 0 !important; }
            main { display: block !important; overflow: visible !important; }
            .preview-container { box-shadow: none !important; margin: 0 !important; padding: 0 !important; width: 100% !important; }
            .a4-page {
                margin: 0 !important;
                padding: 20mm !important;
                box-shadow: none !important;
                border: none !important;
                width: 210mm !important;
                min-height: 297mm !important;
                page-break-after: always;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        /* --- 화면 표시용 A4 스타일 --- */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin: 0 auto 30px auto;
            background: white;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            color: black;
            line-height: 1.6;
            font-size: 10.5pt;
            position: relative;
            box-sizing: border-box;
            border: 1px solid #e2e8f0;
        }

        .contract-table { width: 100%; border-collapse: collapse; margin: 10px 0 20px 0; border: 1px solid black; }
        .contract-table th, .contract-table td { border: 1px solid black; padding: 8px 12px; text-align: left; vertical-align: middle; }
        .contract-table th { background-color: #f1f5f9; font-weight: 700; width: 120px; text-align: center; }

        h1.doc-title { font-size: 18pt; font-weight: 700; text-align: center; margin-bottom: 30px; letter-spacing: -0.5px; }
        h2.doc-section { font-size: 11pt; font-weight: 700; margin-top: 25px; margin-bottom: 10px; background-color: #f3f3f3; padding: 5px 10px; border: 1px solid #000; }
        h3.doc-sub { font-size: 10.5pt; font-weight: 700; margin-top: 15px; margin-bottom: 5px; }
        
        p { margin-bottom: 6px; text-align: justify; }
        ol, ul { padding-left: 20px; margin-bottom: 8px; }
        li { margin-bottom: 3px; }

        .check-box { display: inline-block; width: 14px; height: 14px; border: 1px solid black; margin-right: 4px; vertical-align: middle; position: relative; top: -1px; }
        .input-fill { border-bottom: 1px solid black; padding: 0 5px; min-width: 50px; display: inline-block; text-align: center; font-weight: 600; }

        /* 별지 스타일 */
        .attach-box { border: 2px solid #000; padding: 20px; margin-top: 10px; }
        .attach-title { text-align: center; font-size: 14pt; font-weight: bold; margin-bottom: 15px; text-decoration: underline; }
        .attach-section-title { background-color: #eee; padding: 5px; font-weight: bold; border: 1px solid #000; margin-top: 12px; }
        .attach-content { border: 1px solid #000; border-top: none; padding: 10px; line-height: 1.8; }

        .sidebar-item-active { background-color: #1e293b; color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Lock Screen 스타일 강화 */
        #lock-screen { backdrop-filter: blur(15px); }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- 초기 전체 잠금 모달 (접속 시 무조건 실행) -->
    <div id="lock-screen" class="fixed inset-0 bg-slate-900/95 z-[100] flex items-center justify-center no-print">
        <div class="bg-white p-10 rounded-3xl shadow-2xl w-full max-w-sm text-center space-y-8 fade-in">
            <div class="w-20 h-20 bg-indigo-50 text-indigo-600 rounded-3xl flex items-center justify-center mx-auto shadow-inner">
                <i data-lucide="shield-check" class="w-10 h-10"></i>
            </div>
            <div>
                <h3 class="text-2xl font-bold text-slate-800">보안 인증</h3>
                <p class="text-sm text-slate-400 mt-2">퍼피갤러리 HR 시스템 접근을 위해<br>대표자 비밀번호를 입력해 주세요.</p>
            </div>
            <div class="space-y-4">
                <input type="password" id="admin-pw-input" onkeyup="if(event.key==='Enter') verifyAdmin()" placeholder="••••" class="w-full text-center text-3xl tracking-[0.8em] border-b-4 border-slate-100 py-4 focus:border-indigo-500 outline-none transition-all bg-transparent">
                <p id="pw-error" class="text-xs text-red-500 hidden font-bold">암호가 일치하지 않습니다. 다시 시도하세요.</p>
            </div>
            <button onclick="verifyAdmin()" class="w-full py-4 text-md font-bold bg-indigo-600 text-white rounded-2xl shadow-xl shadow-indigo-200 hover:bg-indigo-700 active:scale-95 transition-all">시스템 시작하기</button>
            <p class="text-[10px] text-slate-300 uppercase tracking-widest font-semibold">Protected by Puppy Gallery HR</p>
        </div>
    </div>

    <!-- 사이드바 (인증 전 숨김) -->
    <nav id="app-sidebar" class="no-print w-72 bg-slate-900 text-slate-400 hidden flex-col border-r border-slate-800">
        <div class="p-8 flex items-center gap-4 border-b border-slate-800">
            <div class="w-12 h-12 bg-indigo-500 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-500/20">
                <i data-lucide="dog" class="w-7 h-7"></i>
            </div>
            <div>
                <h1 class="text-white font-bold text-lg leading-tight">Puppy Gallery</h1>
                <p class="text-[10px] text-slate-500 uppercase tracking-widest font-semibold mt-1">HR Administration</p>
            </div>
        </div>
        
        <div class="flex-1 p-6 space-y-2">
            <button onclick="switchView('dashboard')" id="nav-dashboard" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 sidebar-item-active">
                <i data-lucide="layout-grid" class="w-5 h-5"></i>
                <span class="text-sm font-medium">대시보드</span>
            </button>
            <button onclick="switchView('list')" id="nav-list" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-800 hover:text-slate-200 transition-all duration-200">
                <i data-lucide="files" class="w-5 h-5"></i>
                <span class="text-sm font-medium">계약서 보관함</span>
            </button>
            <div class="pt-6 pb-2">
                <p class="text-[10px] font-bold text-slate-600 uppercase px-4 tracking-widest">Action</p>
            </div>
            <button onclick="startNewContract()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-indigo-600/10 text-indigo-400 hover:bg-indigo-600 hover:text-white transition-all duration-200">
                <i data-lucide="plus-circle" class="w-5 h-5"></i>
                <span class="text-sm font-bold">새 계약서 작성</span>
            </button>
        </div>

        <div class="p-6 border-t border-slate-800 space-y-3">
            <button onclick="exportData()" class="w-full flex items-center gap-3 px-4 py-2 text-xs hover:text-indigo-400 transition">
                <i data-lucide="save" class="w-4 h-4"></i> 데이터 백업
            </button>
            <button onclick="changePasswordPrompt()" class="w-full flex items-center gap-3 px-4 py-2 text-xs hover:text-indigo-400 transition">
                <i data-lucide="key" class="w-4 h-4"></i> 암호 변경
            </button>
            <button onclick="logoutAdmin()" class="w-full flex items-center gap-3 px-4 py-2 text-xs text-red-400/60 hover:text-red-400 transition">
                <i data-lucide="log-out" class="w-4 h-4"></i> 시스템 잠금(로그아웃)
            </button>
        </div>
    </nav>

    <!-- 메인 컨텐츠 (인증 전 숨김) -->
    <main id="app-main" class="flex-1 hidden flex flex-col overflow-hidden">
        <header class="no-print h-20 bg-white border-b border-slate-200 flex items-center justify-between px-10 shrink-0 z-10 shadow-sm">
            <div>
                <h2 id="view-title" class="text-xl font-bold text-slate-800 tracking-tight">대시보드</h2>
                <p id="view-desc" class="text-xs text-slate-400 mt-0.5">인적 자원 관리 및 근로계약 현황</p>
            </div>
            <div id="header-actions" class="flex items-center gap-4">
                <div id="save-indicator" class="flex items-center gap-2 px-3 py-1.5 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-bold opacity-0 transition-opacity">
                    자동 저장됨
                </div>
                <button onclick="window.print()" class="bg-slate-900 hover:bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 transition-all duration-200">
                    <i data-lucide="printer" class="w-4 h-4"></i> 인쇄 / PDF 저장
                </button>
            </div>
        </header>

        <div id="main-scroll" class="flex-1 overflow-y-auto p-10 bg-[#f8fafc]">
            <!-- 대시보드 View -->
            <div id="view-dashboard" class="fade-in space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">누적 계약 건수</p>
                        <h3 id="stat-total" class="text-4xl font-bold mt-2 text-slate-800">0</h3>
                    </div>
                    <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">상태</p>
                        <h3 class="text-4xl font-bold mt-2 text-indigo-600">Authorized</h3>
                    </div>
                    <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">데이터 위치</p>
                        <h3 class="text-4xl font-bold mt-2 text-slate-800">Browser</h3>
                    </div>
                </div>
                <div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-8 py-6 border-b border-slate-100 flex justify-between items-center">
                        <h3 class="font-bold text-slate-800">최근 업데이트된 계약서</h3>
                        <button onclick="switchView('list')" class="text-xs text-indigo-600 font-bold hover:bg-indigo-50 px-3 py-1.5 rounded-lg transition">전체보기</button>
                    </div>
                    <div id="recent-list" class="divide-y divide-slate-50"></div>
                </div>
            </div>

            <!-- 목록 View -->
            <div id="view-list" class="fade-in hidden space-y-6">
                <div class="flex justify-between items-center">
                    <div class="relative w-96">
                        <i data-lucide="search" class="absolute left-4 top-3.5 w-5 h-5 text-slate-400"></i>
                        <input type="text" oninput="filterList(this.value)" placeholder="이름 검색..." class="w-full pl-12 pr-6 py-3 bg-white border border-slate-200 rounded-2xl text-sm outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all">
                    </div>
                </div>
                <div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="bg-slate-50/50 text-slate-400 text-[10px] uppercase font-bold tracking-widest">
                                <th class="px-8 py-4">근로자 성명</th>
                                <th class="px-8 py-4">직무</th>
                                <th class="px-8 py-4">계약일</th>
                                <th class="px-8 py-4">급여액</th>
                                <th class="px-8 py-4 text-right">관리</th>
                            </tr>
                        </thead>
                        <tbody id="full-list" class="divide-y divide-slate-100"></tbody>
                    </table>
                </div>
            </div>

            <!-- 에디터 View -->
            <div id="view-editor" class="fade-in hidden flex flex-col lg:flex-row gap-10">
                <aside class="no-print lg:w-96 shrink-0 space-y-6">
                    <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-200 space-y-8">
                        <div>
                            <label class="block text-[10px] font-bold text-slate-400 uppercase mb-4 tracking-widest">계약 직무</label>
                            <div class="flex p-1 bg-slate-100 rounded-2xl">
                                <button onclick="setJob('logistics')" id="job-log" class="flex-1 py-3 rounded-xl text-sm font-bold transition-all duration-200 shadow-sm bg-white text-indigo-600">물류/창고</button>
                                <button onclick="setJob('office')" id="job-off" class="flex-1 py-3 rounded-xl text-sm font-bold transition-all duration-200 text-slate-400">사무/운영</button>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest">인적사항</label>
                            <input type="text" id="edit-name" oninput="updateCurrent('emp_name', this.value)" placeholder="성명" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none transition-all">
                            <input type="text" id="edit-birth" oninput="updateCurrent('emp_birth', this.value)" placeholder="생년월일" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                            <input type="text" id="edit-phone" oninput="updateCurrent('emp_phone', this.value)" placeholder="연락처" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                            <input type="text" id="edit-addr" oninput="updateCurrent('emp_addr', this.value)" placeholder="주소" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                            <input type="text" id="edit-email" oninput="updateCurrent('emp_email', this.value)" placeholder="이메일" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                        </div>
                        <div class="space-y-4">
                            <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest">근로 조건</label>
                            <div class="grid grid-cols-2 gap-3">
                                <input type="date" id="edit-date" oninput="updateCurrent('start_date', this.value)" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-xs">
                                <input type="number" id="edit-probation" oninput="updateCurrent('probation', this.value)" placeholder="수습" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                            </div>
                            <input type="text" id="edit-salary" oninput="updateCurrent('salary', this.value)" placeholder="월 급여액(세전)" class="w-full border border-slate-200 rounded-xl px-4 py-3 text-sm">
                        </div>
                        <button onclick="saveAndExit()" class="w-full bg-slate-900 text-white py-4 rounded-2xl text-sm font-bold hover:bg-indigo-600 transition-all shadow-xl shadow-slate-900/20 flex items-center justify-center gap-3">
                            <i data-lucide="check-circle" class="w-5 h-5"></i> 저장 및 목록으로
                        </button>
                    </div>
                </aside>
                <div id="contract-render" class="flex-1 overflow-x-auto pb-20"></div>
            </div>
        </div>
    </main>

    <script>
        // --- Core Data & Security ---
        const DB_KEY = 'pg_hr_app_db_v2';
        const AUTH_KEY = 'pg_admin_authorized_v2';
        const PW_KEY = 'pg_admin_pw';
        
        let contracts = JSON.parse(localStorage.getItem(DB_KEY) || '[]');
        let currentContract = null;
        let isAuthorized = sessionStorage.getItem(AUTH_KEY) === 'true';
        let adminPassword = localStorage.getItem(PW_KEY) || '1234';

        // --- 보안 로직 ---
        function verifyAdmin() {
            const input = document.getElementById('admin-pw-input').value;
            if (input === adminPassword) {
                isAuthorized = true;
                sessionStorage.setItem(AUTH_KEY, 'true');
                document.getElementById('lock-screen').classList.add('hidden');
                initApp();
            } else {
                document.getElementById('pw-error').classList.remove('hidden');
            }
        }

        function initApp() {
            if (!isAuthorized) return;
            document.getElementById('app-sidebar').classList.remove('hidden');
            document.getElementById('app-sidebar').classList.add('flex');
            document.getElementById('app-main').classList.remove('hidden');
            document.getElementById('app-main').classList.add('flex');
            renderDashboard();
            lucide.createIcons();
        }

        function logoutAdmin() {
            if (confirm('시스템을 잠그고 로그아웃하시겠습니까?')) {
                isAuthorized = false;
                sessionStorage.removeItem(AUTH_KEY);
                location.reload();
            }
        }

        function changePasswordPrompt() {
            const newPw = prompt('새로운 대표자 암호를 입력하세요 (4자리 이상)');
            if (newPw && newPw.length >= 4) {
                adminPassword = newPw;
                localStorage.setItem(PW_KEY, newPw);
                alert('암호가 변경되었습니다.');
            }
        }

        // --- Rendering Helpers ---
        const f = (val, def = " [ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ] ") => val || def;
        const formatDate = (dateStr) => {
            if(!dateStr) return "20[ &nbsp;&nbsp; ]년 [ &nbsp;&nbsp; ]월 [ &nbsp;&nbsp; ]일";
            const d = new Date(dateStr);
            return `${d.getFullYear()}년 ${d.getMonth()+1}월 ${d.getDate()}일`;
        };

        function switchView(viewName) {
            ['dashboard', 'list', 'editor'].forEach(v => {
                document.getElementById(`view-${v}`).classList.add('hidden');
                const n = document.getElementById(`nav-${v}`);
                if(n) n.classList.remove('sidebar-item-active');
            });
            document.getElementById(`view-${viewName}`).classList.remove('hidden');
            const activeNav = document.getElementById(`nav-${viewName}`);
            if(activeNav) activeNav.classList.add('sidebar-item-active');

            if(viewName === 'dashboard') renderDashboard();
            if(viewName === 'list') renderList();
            lucide.createIcons();
        }

        function startNewContract() {
            currentContract = { id: Date.now(), jobType: 'logistics', emp_name: '', emp_birth: '', emp_phone: '', emp_addr: '', emp_email: '', start_date: '', probation: '3', salary: '', updatedAt: new Date().toISOString() };
            switchView('editor');
            syncEditorFields();
            renderEditor();
        }

        function editContract(id) {
            currentContract = contracts.find(c => c.id === id);
            switchView('editor');
            syncEditorFields();
            renderEditor();
        }

        function syncEditorFields() {
            const c = currentContract;
            document.getElementById('edit-name').value = c.emp_name;
            document.getElementById('edit-birth').value = c.emp_birth;
            document.getElementById('edit-phone').value = c.emp_phone;
            document.getElementById('edit-addr').value = c.emp_addr;
            document.getElementById('edit-email').value = c.emp_email;
            document.getElementById('edit-date').value = c.start_date;
            document.getElementById('edit-salary').value = c.salary;
            document.getElementById('edit-probation').value = c.probation;
            setJob(c.jobType);
        }

        function updateCurrent(key, value) {
            currentContract[key] = value;
            currentContract.updatedAt = new Date().toISOString();
            renderEditor();
            const idx = contracts.findIndex(c => c.id === currentContract.id);
            if(idx > -1) contracts[idx] = currentContract;
            else contracts.unshift(currentContract);
            localStorage.setItem(DB_KEY, JSON.stringify(contracts));
        }

        function setJob(type) {
            currentContract.jobType = type;
            const logBtn = document.getElementById('job-log');
            const offBtn = document.getElementById('job-off');
            logBtn.className = type === 'logistics' ? "flex-1 py-3 rounded-xl text-sm font-bold bg-white text-indigo-600 shadow-sm" : "flex-1 py-3 rounded-xl text-sm font-bold text-slate-400";
            offBtn.className = type === 'office' ? "flex-1 py-3 rounded-xl text-sm font-bold bg-white text-indigo-600 shadow-sm" : "flex-1 py-3 rounded-xl text-sm font-bold text-slate-400";
            renderEditor();
        }

        function saveAndExit() { switchView('list'); }

        function deleteContract(id) {
            if(confirm('데이터가 영구 삭제됩니다. 계속할까요?')) {
                contracts = contracts.filter(c => c.id !== id);
                localStorage.setItem(DB_KEY, JSON.stringify(contracts));
                renderList();
            }
        }

        function renderDashboard() {
            document.getElementById('stat-total').innerText = contracts.length;
            const recent = contracts.slice(0, 5);
            const listEl = document.getElementById('recent-list');
            if(recent.length === 0) {
                listEl.innerHTML = '<div class="p-20 text-center text-slate-300 text-sm">기록이 없습니다.</div>';
            } else {
                listEl.innerHTML = recent.map(c => `
                    <div class="flex items-center justify-between p-5 px-8 hover:bg-indigo-50/30 transition-all cursor-pointer group" onclick="editContract(${c.id})">
                        <div class="flex items-center gap-5">
                            <div class="w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center text-slate-400 font-bold">${c.emp_name ? c.emp_name[0] : '?'}</div>
                            <div>
                                <p class="text-sm font-bold text-slate-800">${c.emp_name || '미입력'}</p>
                                <p class="text-[10px] text-slate-400 font-semibold uppercase">${c.jobType === 'logistics' ? '창고·물류' : '사무·운영'}</p>
                            </div>
                        </div>
                        <i data-lucide="chevron-right" class="w-4 h-4 text-slate-200 group-hover:text-indigo-400 transition-all"></i>
                    </div>
                `).join('');
            }
            lucide.createIcons();
        }

        function renderList(filtered = null) {
            const data = filtered || contracts;
            const el = document.getElementById('full-list');
            if(data.length === 0) { el.innerHTML = '<tr><td colspan="5" class="p-32 text-center text-slate-300 text-sm">데이터가 비어있습니다.</td></tr>'; }
            else {
                el.innerHTML = data.map(c => `
                    <tr class="hover:bg-slate-50/50 transition">
                        <td class="px-8 py-5"><div class="flex items-center gap-3"><span class="w-8 h-8 rounded-lg bg-indigo-50 text-indigo-500 flex items-center justify-center font-bold text-xs">${c.emp_name ? c.emp_name[0] : '?'}</span><span class="font-bold text-slate-800 text-sm">${c.emp_name || '-'}</span></div></td>
                        <td class="px-8 py-5 text-xs text-slate-400 uppercase">${c.jobType === 'logistics' ? '창고·물류' : '사무·운영'}</td>
                        <td class="px-8 py-5 text-xs text-slate-500">${c.start_date || '-'}</td>
                        <td class="px-8 py-5 text-xs font-bold text-indigo-600">${c.salary ? Number(c.salary).toLocaleString() + '원' : '-'}</td>
                        <td class="px-8 py-5 text-right space-x-2"><button onclick="editContract(${c.id})" class="p-2.5 text-slate-400 hover:text-indigo-600"><i data-lucide="edit-3" class="w-4 h-4"></i></button><button onclick="deleteContract(${c.id})" class="p-2.5 text-slate-400 hover:text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button></td>
                    </tr>
                `).join('');
            }
            lucide.createIcons();
        }

        function filterList(query) {
            const q = query.toLowerCase();
            const filtered = contracts.filter(c => (c.emp_name||"").toLowerCase().includes(q));
            renderList(filtered);
        }

        function renderEditor() {
            const c = currentContract;
            const isLog = c.jobType === 'logistics';
            const name = f(c.emp_name);
            const today = formatDate(new Date());
            const start = formatDate(c.start_date);
            
            const content = `
                <!-- 1페이지 -->
                <div class="a4-page">
                    <h1 class="doc-title">[퍼피갤러리] 정규직 근로계약서_${isLog?'창고/물류':'사무/운영 직무'}</h1>
                    <p>(이하 “사업주”라 함) <strong>퍼피갤러리(Puppy Gallery) 대표 노미래</strong>와 (이하 “근로자”라 함) <strong>${name}</strong>은 다음과 같이 근로계약을 체결한다.</p>
                    <h2 class="doc-section">[기본 정보]</h2>
                    <table class="contract-table">
                        <tr><th>회사명</th><td>퍼피갤러리(Puppy Gallery)</td><th>대표자</th><td>노미래</td></tr>
                        <tr><th>사업자번호</th><td>316-43-00130</td><th>연락처</th><td>010-8554-9133</td></tr>
                        <tr><th>근로자 성명</th><td>${name}</td><th>생년월일</th><td>${f(c.emp_birth)}</td></tr>
                        <tr><th>주소</th><td colspan="3">${f(c.emp_addr)}</td></tr>
                        <tr><th>연락처</th><td>${f(c.emp_phone)}</td><th>이메일</th><td>${f(c.emp_email)}</td></tr>
                    </table>
                    <h3 class="doc-sub">제1조 (목적 및 계약기간)</h3>
                    <ol><li>본 계약은 근로조건, 직무수행 등을 정함을 목적으로 한다.</li><li>계약 시작일: <span class="input-fill">${start}</span> 부터 기간의 정함이 없는 근로계약으로 한다.</li></ol>
                    <h3 class="doc-sub">제1조의2 (수습기간/시용기간)</h3>
                    <ol><li>수습기간은 입사일로부터 <strong>${f(c.probation, '3')}개월</strong>로 하며, 수습 중 임금은 90%를 지급한다.</li></ol>
                    <h3 class="doc-sub">제2조 (근무장소 및 업무내용)</h3>
                    <ol><li>근무장소: 퍼피갤러리 지정 사업장</li><li>업무내용: <strong>${isLog?'창고·물류 및 재고 운영 직무':'사무·관리 및 운영 직무'}</strong>로서 세부 범위는 <strong>별지1-${isLog?'B':'A'}</strong>에 따른다.</li></ol>
                    <h3 class="doc-sub">제3조 (근로시간)</h3>
                    <ol><li>주 5일 근무, 09:00 ~ 17:00 (1일 7시간, 주 35시간).</li><li>휴게시간: 11:30 ~ 12:30 (60분).</li></ol>
                    <h3 class="doc-sub">제4조 (임금)</h3>
                    <ol><li>월 급여(세전): <strong>${c.salary ? Number(c.salary).toLocaleString() : ' [ &nbsp;&nbsp;&nbsp;&nbsp; ] '}원</strong>.</li><li>지급일: 매월 4일.</li></ol>
                </div>

                <!-- 2페이지 -->
                <div class="a4-page page-break">
                    <h3 class="doc-sub">제4조의2 ~ 제4조의5 (기타 임금 및 자산)</h3>
                    <p>성과급은 경영 여건에 따라 지급할 수 있다. 회사 자산/계정은 목적 외 사용을 금하며 퇴사 시 즉시 반납한다. 모든 저작권은 회사에 귀속된다.</p>
                    <h3 class="doc-sub">제5조 (보고·협업 및 연락 의무 – 10-10-10 규칙)</h3>
                    <ol>
                        <li><strong>업무 시작 보고</strong>: 시작 후 10분 이내 ‘일일 업무계획’ 보고.</li>
                        <li><strong>업무 종료 보고</strong>: 종료 후 10분 이내 ‘일일 업무결과’ 보고.</li>
                        <li><strong>응답 의무</strong>: 근무시간 중 회사 연락에 10분 이내 응답.</li>
                        <li><strong>출고 마감 운영</strong>: 16시 송장마감, 17시 배송마감 준수.</li>
                    </ol>
                    <h3 class="doc-sub">제6조 ~ 제10조 (기타)</h3>
                    <p>연차/약정휴가는 최소 1개월 전 신청하며, 비밀유지 및 인수인계 의무를 성실히 이행한다.</p>
                    <div class="signature-section" style="margin-top:150px">
                        <p style="text-align: center; margin-bottom: 30px"><strong>작성일: ${today}</strong></p>
                        <div class="flex justify-between">
                            <div class="w-1/2"><strong>사업주(회사):</strong> 퍼피갤러리 대표 노미래 (인)<div style="border-bottom: 1px solid #000; margin-top: 30px;"></div></div>
                            <div class="w-1/2 ml-10"><strong>근로자:</strong> ${name} (인)<div style="border-bottom: 1px solid #000; margin-top: 30px;"></div></div>
                        </div>
                    </div>
                </div>

                <!-- 3페이지: 별지1 -->
                <div class="a4-page page-break">
                    <div class="attach-box">
                        <div class="attach-title">[별지1-${isLog?'B':'A'}] 직무기술서/업무범위 체크리스트(${isLog?'창고·물류용':'사무·운영용'})</div>
                        <p>• 근로자: ${name} &nbsp; • 작성일: ${today}</p>
                        <div class="attach-section-title">1) 필수 책임업무</div>
                        <div class="attach-content">
                            ${isLog ? `
                                <span class="check-box"></span> 입고(검수/수량 확인/적치)<br>
                                <span class="check-box"></span> 출고(피킹/패킹/송장 마감)<br>
                                <span class="check-box"></span> 재고 관리(로케이션/실사 보고)<br>
                                <span class="check-box"></span> 반품/교환 실물 처리 및 기록<br>
                                <span class="check-box"></span> 출고 마감 운영 준수 (15~17 마감)
                            ` : `
                                <span class="check-box"></span> 주문/송장 데이터 관리<br>
                                <span class="check-box"></span> CS 처리(문의/교환/반품)<br>
                                <span class="check-box"></span> 재고/상품 데이터 관리<br>
                                <span class="check-box"></span> 출고 마감 영향 이슈 보고
                            `}
                        </div>
                        <div style="margin-top: 20px; text-align: right">서명: 근로자 [ &nbsp;&nbsp;&nbsp;&nbsp; ] / 사업주 [ &nbsp;&nbsp;&nbsp;&nbsp; ]</div>
                    </div>
                </div>

                <!-- 4페이지: 별지2, 3 -->
                <div class="a4-page page-break">
                    <div class="attach-box">
                        <div class="attach-title">[별지2] 업무보고·회의 운영 양식</div>
                        <div class="attach-section-title">일일 업무계획/결과 (10-10-10)</div>
                        <div class="attach-content" style="min-height:100px"></div>
                    </div>
                    <div class="attach-box" style="margin-top:20px">
                        <div class="attach-title">[별지3] 휴가 신청서</div>
                        <div class="attach-section-title">신청 일정 및 인수인계 담당자</div>
                        <div class="attach-content" style="min-height:100px"></div>
                        <div style="margin-top: 15px; text-align: center">신청자: (인) &nbsp; 관리자: (인)</div>
                    </div>
                </div>
            `;
            document.getElementById('contract-render').innerHTML = content;
        }

        function exportData() {
            const blob = new Blob([JSON.stringify(contracts, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `PG_HR_Backup_${new Date().toISOString().slice(0,10)}.json`;
            a.click();
        }

        window.onload = () => {
            if (isAuthorized) {
                document.getElementById('lock-screen').classList.add('hidden');
                initApp();
            } else {
                document.getElementById('lock-screen').classList.remove('hidden');
                lucide.createIcons();
            }
        };
    </script>
</body>
</html>
